import React from "react";
import { Pie, Line, Bar } from "react-chartjs-2";
import {
  Chart as ChartJS,
  CategoryScale,
  LinearScale,
  PointElement,
  LineElement,
  BarElement,
  Title,
  Tooltip,
  Legend,
  ArcElement,
} from "chart.js";

// Register chart components
ChartJS.register(
  CategoryScale,
  LinearScale,
  PointElement,
  LineElement,
  BarElement,
  Title,
  Tooltip,
  Legend,
  ArcElement
);

// Example data for the graphs
const lineData = {
  labels: [
    "Jan",
    "Feb",
    "Mar",
    "Apr",
    "May",
    "Jun",
    "Jul",
    "Aug",
    "Sep",
    "Oct",
    "Nov",
    "Dec",
  ],
  datasets: [
    {
      label: "Patient Acquisition",
      data: [30, 50, 45, 60, 80, 90, 100, 85, 70, 50, 30, 45],
      borderColor: "green",
      fill: false,
    },
    {
      label: "Income",
      data: [100, 120, 115, 130, 150, 160, 170, 155, 140, 120, 100, 115],
      borderColor: "blue",
      fill: false,
    },
  ],
};

const pieData = {
  labels: ["Doctor Visit", "Homecare", "On Demand Service", "Caretaker/Nurse"],
  datasets: [
    {
      data: [30, 20, 15, 35],
      backgroundColor: ["#7F3DFF", "#00A86B", "#FD3C4A", "#9B51E0"],
    },
  ],
};

const barData = {
  labels: ["Total Consultations", "Cancelled", "Completed"],
  datasets: [
    {
      label: "Consultations",
      data: [40000, 15000, 35000],
      backgroundColor: ["#3B82F6", "#F87171", "#10B981"],
    },
  ],
};

// TDM Services Insights Card
const TDMServicesInsightsCard = () => (
  <div className="bg-white p-6 rounded-2xl shadow-lg w-full">
    <h3 className="text-lg font-semibold mb-4">TDM Services Insights</h3>
    <div className="grid grid-cols-3 gap-4">
      <div>
        <p className="text-2xl font-bold">124</p>
        <p className="text-sm text-gray-500">Daily Consultation</p>
        <p className="text-red-600 text-xs">Low from last week</p>
      </div>
      <div>
        <p className="text-2xl font-bold">21:00</p>
        <p className="text-sm text-gray-500">Consultation Duration</p>
        <p className="text-green-600 text-xs">High from last week</p>
      </div>
      <div>
        <p className="text-2xl font-bold">₹100</p>
        <p className="text-sm text-gray-500">Avg Income per Patient</p>
        <p className="text-green-600 text-xs">High from last week</p>
      </div>
      <div>
        <p className="text-2xl font-bold">₹45</p>
        <p className="text-sm text-gray-500">Mini-Consultation Income</p>
        <p className="text-red-600 text-xs">Low from last week</p>
      </div>
      <div>
        <p className="text-2xl font-bold">₹650</p>
        <p className="text-sm text-gray-500">Max Consultation Fee</p>
        <p className="text-red-600 text-xs">Low from last week</p>
      </div>
    </div>
  </div>
);

// Consultations Bar Chart Card
const ConsultationBarChart = () => (
  <div className="bg-white p-6 rounded-2xl shadow-lg w-full">
    <h3 className="text-lg font-semibold mb-4">Consultations</h3>
    <Bar data={barData} />
  </div>
);

// Dashboard Card Component - used to display each card with multiple services
const DashboardCard = ({ title, services }) => (
  <div className="bg-white p-6 rounded-2xl shadow-lg h-full">
    <h3 className="text-md font-semibold mb-4">{title}</h3>
    <div className="flex justify-between items-center space-x-6">
      {services.map((service, index) => (
        <div key={index} className="flex flex-col items-center">
          <div className="bg-blue-100 p-4 rounded-full">{service.icon}</div>
          <p className="text-2xl font-bold text-gray-800 mt-2">
            {service.value}
          </p>
          <p className="text-gray-500 text-sm">{service.label}</p>
        </div>
      ))}
    </div>
  </div>
);

const DashboardContent = () => (
  <div className="p-4 space-y-6">
    {/* Cards and Pie Chart Layout */}
    <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
      {/* Cards Container */}
      <div className="lg:col-span-2 grid grid-cols-2 gap-6">
        {/* Use flex to align card height with pie chart */}
        <div className="flex flex-col space-y-6 h-full">
          <DashboardCard
            title="TDM Services"
            services={[
              {
                icon: <span className="text-blue-600">👜</span>,
                value: "3540",
                label: "Total Consultations",
              },
              {
                icon: <span className="text-blue-600">🛡️</span>,
                value: "3540",
                label: "Health Checkup",
              },
              {
                icon: <span className="text-blue-600">📈</span>,
                value: "3540",
                label: "ECG",
              },
            ]}
          />
          <DashboardCard
            title="TDM Information"
            services={[
              {
                icon: <span className="text-orange-600">📠</span>,
                value: "40",
                label: "Total TDMs",
              },
              {
                icon: <span className="text-red-600">📠</span>,
                value: "05",
                label: "Inactive TDMs",
              },
              {
                icon: <span className="text-purple-600">👤</span>,
                value: "3540",
                label: "Total Patients",
              },
            ]}
          />
        </div>
        <div className="flex flex-col space-y-6 h-full">
          <DashboardCard
            title="Doctor"
            services={[
              {
                icon: <span className="text-green-600">🩺</span>,
                value: "50",
                label: "Total Doctors",
              },
              {
                icon: <span className="text-green-600">👩‍⚕️</span>,
                value: "45",
                label: "Active Doctors",
              },
              {
                icon: <span className="text-green-600">💰</span>,
                value: "₹650",
                label: "Avg Fees",
              },
            ]}
          />
          <DashboardCard
            title="Home-Care Services"
            services={[
              {
                icon: <span className="text-purple-600">🏠</span>,
                value: "20",
                label: "Doctor Visit",
              },
              {
                icon: <span className="text-blue-600">--</span>,
                value: "NA",
                label: "Caretaker/Nurse",
              },
              {
                icon: <span className="text-green-600">📅</span>,
                value: "07",
                label: "On Demand Services",
              },
            ]}
          />
        </div>
      </div>

      {/* Pie Chart on the right */}
      <div className="flex items-stretch">
        <div className="bg-white p-6 rounded-2xl shadow-lg w-full">
          <h3 className="text-lg font-semibold mb-4">
            Revenue Distribution by Source
          </h3>
          <Pie data={pieData} />
        </div>
      </div>
    </div>

    {/* Line Charts for Patient Acquisition and Income */}
    <div className="grid grid-cols-1 lg:grid-cols-2 gap-6 mt-6">
      {/* Patient Acquisition Chart */}
      <div className="bg-white p-6 rounded-2xl shadow-lg">
        <h3 className="text-lg font-semibold mb-4">Patient Acquisition</h3>
        <Line data={lineData} />
      </div>
      {/* Total Income Chart */}
      <div className="bg-white p-6 rounded-2xl shadow-lg">
        <h3 className="text-lg font-semibold mb-4">Total Income Graph</h3>
        <Line data={lineData} />
      </div>
    </div>

    {/* New Components */}
    <div className="grid grid-cols-1 lg:grid-cols-2 gap-6 mt-6">
      <TDMServicesInsightsCard />
      <ConsultationBarChart />
    </div>
  </div>
);

const DoctorListContent = () => (
  <div className="p-4">
    <h1 className="text-2xl font-bold">Doctor List</h1>
    <p>Doctor List content goes here.</p>
  </div>
);

const TDMManagementContent = () => (
  <div className="p-4">
    <h1 className="text-2xl font-bold">TDM Management</h1>
    <p>TDM Management content goes here.</p>
  </div>
);

const HomecareServicesContent = () => (
  <div className="p-4">
    <h1 className="text-2xl font-bold">Homecare Services</h1>
    <p>Homecare Services content goes here.</p>
  </div>
);

const RevenueManagementContent = () => (
  <div className="p-4">
    <h1 className="text-2xl font-bold">Revenue Management</h1>
    <p>Revenue Management content goes here.</p>
  </div>
);

// Main Content Component - dynamically renders based on content type
const Content = ({ content }) => {
  switch (content) {
    case "Dashboard":
      return <DashboardContent />;
    case "Doctor List":
      return <DoctorListContent />;
    case "TDM Management":
      return <TDMManagementContent />;
    case "Homecare Services":
      return <HomecareServicesContent />;
    case "Revenue Management":
      return <RevenueManagementContent />;
    default:
      return <DashboardContent />;
  }
};

export default Content;
